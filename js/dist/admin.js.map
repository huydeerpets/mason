{"version":3,"sources":["webpack://@huydeerpets/mason/webpack/bootstrap","webpack://@huydeerpets/mason/./admin.js","webpack://@huydeerpets/mason/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@huydeerpets/mason/./src/admin/addMasonFieldsPane.js","webpack://@huydeerpets/mason/./src/admin/addPermissions.js","webpack://@huydeerpets/mason/./src/admin/components/AnswerEdit.js","webpack://@huydeerpets/mason/./src/admin/components/FieldAnswersEdit.js","webpack://@huydeerpets/mason/./src/admin/components/FieldEdit.js","webpack://@huydeerpets/mason/./src/admin/components/MasonSettings.js","webpack://@huydeerpets/mason/./src/admin/index.js","webpack://@huydeerpets/mason/./src/admin/panes/MasonFieldsPane.js","webpack://@huydeerpets/mason/./src/lib/helpers/sortByAttribute.js","webpack://@huydeerpets/mason/./src/lib/models/Answer.js","webpack://@huydeerpets/mason/./src/lib/models/Field.js","webpack://@huydeerpets/mason/external \"flarum.core.compat['Component']\"","webpack://@huydeerpets/mason/external \"flarum.core.compat['Model']\"","webpack://@huydeerpets/mason/external \"flarum.core.compat['app']\"","webpack://@huydeerpets/mason/external \"flarum.core.compat['components/AdminLinkButton']\"","webpack://@huydeerpets/mason/external \"flarum.core.compat['components/AdminNav']\"","webpack://@huydeerpets/mason/external \"flarum.core.compat['components/Button']\"","webpack://@huydeerpets/mason/external \"flarum.core.compat['components/PermissionGrid']\"","webpack://@huydeerpets/mason/external \"flarum.core.compat['components/Select']\"","webpack://@huydeerpets/mason/external \"flarum.core.compat['components/Switch']\"","webpack://@huydeerpets/mason/external \"flarum.core.compat['extend']\"","webpack://@huydeerpets/mason/external \"flarum.core.compat['helpers/icon']\"","webpack://@huydeerpets/mason/external \"flarum.core.compat['utils/computed']\"","webpack://@huydeerpets/mason/external \"flarum.core.compat['utils/mixin']\"","webpack://@huydeerpets/mason/external \"flarum.core.compat['utils/saveSettings']\""],"names":["app","routes","path","component","MasonFieldsPane","extensionSettings","m","route","extend","AdminNav","prototype","items","add","AdminLinkButton","href","icon","children","description","translator","trans","PermissionGrid","label","permission","allowGuest","FieldEdit","init","answer","props","dirty","processing","view","is_suggested","onclick","newContent","prompt","content","updateAttribute","Switch","state","onchange","value","saveAnswer","Button","type","className","loading","disabled","readyToSave","bind","deleteAnswer","attribute","pushAttributes","save","data","attributes","then","redraw","catch","err","confirm","delete","Component","FieldAnswersEdit","field","new_content","showUserAnswers","config","$","sortable","handle","on","sorting","map","get","updateSort","exists","suggestedAnswers","userAnswers","all_answers","forEach","push","sortByAttribute","key","id","AnswerEdit","length","count","oninput","withAttr","placeholder","saveField","request","method","url","forum","apiEndpoint","result","store","pushPayload","sort","toggleFields","initNewField","createRecord","name","min_answers_count","max_answers_count","user_values_allowed","show_when_empty","validation","boxTitle","viewFields","a","iconPreview","deleteField","createNewRecord","preview","MasonSettings","fieldsSectionTitle","prop","settings","columnCount","labelsAsPlaceholders","fieldsInHero","hideEmptyFieldsSection","tagsAsFields","tagsFieldName","columnOptions","i","updateSetting","Select","options","setting","saveSettings","initializers","models","Field","Answer","addMasonFieldsPane","addPermissions","fields","all","fieldsList","attr","b","mixin","Model","hasOne","deleted_at","transformDate","hasMany","suggested_answers","required","computed","multiple"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./admin.js\");\n","export * from './src/admin';\r\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import {extend} from 'flarum/extend';\r\nimport app from 'flarum/app';\r\nimport AdminNav from 'flarum/components/AdminNav';\r\nimport AdminLinkButton from 'flarum/components/AdminLinkButton';\r\nimport MasonFieldsPane from './panes/MasonFieldsPane';\r\n\r\nexport default function () {\r\n    // create the route\r\n    app.routes['huydeerpets-mason-fields'] = {\r\n        path: '/huydeerpets/mason',\r\n        component: MasonFieldsPane.component(),\r\n    };\r\n\r\n    // bind the route we created to the three dots settings button\r\n    app.extensionSettings['huydeerpets-mason'] = () => m.route(app.route('huydeerpets-mason-fields'));\r\n\r\n    extend(AdminNav.prototype, 'items', items => {\r\n        // add the Image Upload tab to the admin navigation menu\r\n        items.add('huydeerpets-mason-fields', AdminLinkButton.component({\r\n            href: app.route('huydeerpets-mason-fields'),\r\n            icon: 'fas fa-dungeon',\r\n            children: 'Mason',\r\n            description: app.translator.trans('huydeerpets-mason.admin.menu.description'),\r\n        }));\r\n    });\r\n}\r\n","import {extend} from 'flarum/extend';\r\nimport app from 'flarum/app';\r\nimport PermissionGrid from 'flarum/components/PermissionGrid';\r\n\r\nexport default function () {\r\n    extend(PermissionGrid.prototype, 'viewItems', items => {\r\n        items.add('huydeerpets-mason-update-own-fields', {\r\n            icon: 'fas fa-dungeon',\r\n            label: app.translator.trans('huydeerpets-mason.admin.permissions.update-own-fields'),\r\n            permission: 'huydeerpets.mason.update-own-fields',\r\n        });\r\n    });\r\n\r\n    extend(PermissionGrid.prototype, 'viewItems', items => {\r\n        items.add('huydeerpets-mason-update-other-fields', {\r\n            icon: 'fas fa-dungeon',\r\n            label: app.translator.trans('huydeerpets-mason.admin.permissions.update-other-fields'),\r\n            permission: 'huydeerpets.mason.update-other-fields',\r\n            allowGuest: true,\r\n        });\r\n    });\r\n\r\n    extend(PermissionGrid.prototype, 'viewItems', items => {\r\n        items.add('huydeerpets-mason-skip-required-fields', {\r\n            icon: 'fas fa-dungeon',\r\n            label: app.translator.trans('huydeerpets-mason.admin.permissions.skip-required-fields'),\r\n            permission: 'huydeerpets.mason.skip-required-fields',\r\n        });\r\n    });\r\n}\r\n","import app from 'flarum/app';\r\nimport icon from 'flarum/helpers/icon';\r\nimport Component from 'flarum/Component';\r\nimport Button from 'flarum/components/Button';\r\nimport Switch from 'flarum/components/Switch';\r\n\r\nexport default class FieldEdit extends Component {\r\n    init() {\r\n        this.answer = this.props.answer;\r\n        this.dirty = false;\r\n        this.processing = false;\r\n    }\r\n\r\n    view() {\r\n        return m('form.Mason-Box', [\r\n            // Only suggested answers can be reordered\r\n            (this.answer.is_suggested() ? [\r\n                m('span.fa.fa-arrows.Mason-Box--handle.js-answer-handle'),\r\n                ' ',\r\n            ] : null),\r\n            m('span', {\r\n                onclick: () => {\r\n                    const newContent = prompt('Edit content', this.answer.content());\r\n\r\n                    if (newContent) {\r\n                        this.updateAttribute('content', newContent);\r\n                    }\r\n                },\r\n            }, [\r\n                this.answer.content(),\r\n                ' ',\r\n                icon('fas fa-pen'),\r\n            ]),\r\n            Switch.component({\r\n                state: this.answer.is_suggested(),\r\n                onchange: value => {\r\n                    this.updateAttribute('is_suggested', value);\r\n\r\n                    // Save right away, because updating the model with immediately trigger a redraw of the UI\r\n                    // And the unsaved state won't be preserved because the AnswerEdit component changes its place\r\n                    this.saveAnswer();\r\n                },\r\n                children: app.translator.trans('huydeerpets-mason.admin.fields.is_suggested'),\r\n            }),\r\n            m('.ButtonGroup', [\r\n                Button.component({\r\n                    type: 'submit',\r\n                    className: 'Button Button--primary',\r\n                    children: app.translator.trans('huydeerpets-mason.admin.buttons.save-answer'),\r\n                    loading: this.processing,\r\n                    disabled: !this.readyToSave(),\r\n                    onclick: this.saveAnswer.bind(this),\r\n                }),\r\n                Button.component({\r\n                    type: 'submit',\r\n                    className: 'Button Button--danger',\r\n                    children: app.translator.trans('huydeerpets-mason.admin.buttons.delete-answer'),\r\n                    loading: this.processing,\r\n                    onclick: this.deleteAnswer.bind(this),\r\n                }),\r\n            ]),\r\n        ]);\r\n    }\r\n\r\n    updateAttribute(attribute, value) {\r\n        this.answer.pushAttributes({\r\n            [attribute]: value,\r\n        });\r\n\r\n        this.dirty = true;\r\n    }\r\n\r\n    readyToSave() {\r\n        return this.dirty;\r\n    }\r\n\r\n    saveAnswer() {\r\n        this.processing = true;\r\n\r\n        this.answer.save(this.answer.data.attributes).then(() => {\r\n            this.processing = false;\r\n            this.dirty = false;\r\n\r\n            m.redraw();\r\n        }).catch(err => {\r\n            this.processing = false;\r\n\r\n            throw err;\r\n        });\r\n    }\r\n\r\n    deleteAnswer() {\r\n        if (!confirm(app.translator.trans('huydeerpets-mason.admin.messages.delete-answer-confirmation', {\r\n                content: this.answer.content(),\r\n            }))) {\r\n            return;\r\n        }\r\n\r\n        this.processing = true;\r\n\r\n        this.answer.delete().then(() => {\r\n            this.processing = false;\r\n\r\n            m.redraw();\r\n        }).catch(err => {\r\n            this.processing = false;\r\n\r\n            throw err;\r\n        });\r\n    }\r\n}\r\n","import app from 'flarum/app';\r\nimport icon from 'flarum/helpers/icon';\r\nimport Component from 'flarum/Component';\r\nimport Button from 'flarum/components/Button';\r\nimport AnswerEdit from './AnswerEdit';\r\nimport sortByAttribute from './../../lib/helpers/sortByAttribute';\r\n\r\nexport default class FieldAnswersEdit extends Component {\r\n    init() {\r\n        this.field = this.props.field;\r\n        this.processing = false;\r\n        this.new_content = '';\r\n        this.showUserAnswers = false;\r\n    }\r\n\r\n    config() {\r\n        this.$('.js-answers-container')\r\n            .sortable({\r\n                handle: '.js-answer-handle',\r\n            })\r\n            .on('sortupdate', () => {\r\n                const sorting = this.$('.js-answer-data')\r\n                    .map(function () {\r\n                        return $(this).data('id');\r\n                    })\r\n                    .get();\r\n\r\n                this.updateSort(sorting);\r\n            });\r\n    }\r\n\r\n    view() {\r\n        if (!this.field.exists) {\r\n            return m('div', app.translator.trans('huydeerpets-mason.admin.fields.save-field-for-answers'));\r\n        }\r\n\r\n        let suggestedAnswers = [];\r\n        let userAnswers = [];\r\n\r\n        this.field.all_answers()\r\n            .forEach(answer => {\r\n                // When answers are deleted via store.delete() they stay as an \"undefined\" relationship\r\n                // We ignore these deleted answers\r\n                if (typeof answer === 'undefined') {\r\n                    return;\r\n                }\r\n\r\n                if (answer.is_suggested()) {\r\n                    suggestedAnswers.push(answer);\r\n                } else {\r\n                    userAnswers.push(answer);\r\n                }\r\n            });\r\n\r\n        return m('div', [\r\n            m('.Mason-Container.js-answers-container', sortByAttribute(suggestedAnswers).map(\r\n                answer => m('.js-answer-data', {\r\n                    key: answer.id(),\r\n                    'data-id': answer.id(),\r\n                }, AnswerEdit.component({\r\n                    answer,\r\n                }))\r\n            )),\r\n            (userAnswers.length ? [\r\n                m('.Button.Button--block.Mason-Box-Header', {\r\n                    onclick: () => {\r\n                        this.showUserAnswers = !this.showUserAnswers;\r\n                    },\r\n                }, [\r\n                    m('.Mason-Box-Header-Title', app.translator.trans('huydeerpets-mason.admin.buttons.show-user-answers', {\r\n                        count: userAnswers.length,\r\n                    })),\r\n                    m('div', [\r\n                        icon('fas fa-chevron-' + (this.showUserAnswers ? 'up' : 'down')),\r\n                    ]),\r\n                ]),\r\n                // The list of user answers can't be re-ordered\r\n                (this.showUserAnswers ? m('.Mason-Container', sortByAttribute(userAnswers, 'content').map(\r\n                    answer => m('div', {\r\n                        key: answer.id(),\r\n                    }, AnswerEdit.component({\r\n                        answer,\r\n                    }))\r\n                )) : null),\r\n            ] : null),\r\n            m('form', [\r\n                m('.Form-group', [\r\n                    m('label', 'New answer'),\r\n                    m('input.FormControl', {\r\n                        value: this.new_content,\r\n                        oninput: m.withAttr('value', value => {\r\n                            this.new_content = value;\r\n                        }),\r\n                        placeholder: app.translator.trans('huydeerpets-mason.admin.fields.new-answer-placeholder'),\r\n                    }),\r\n                ]),\r\n                m('.Form-group', [\r\n                    Button.component({\r\n                        type: 'submit',\r\n                        className: 'Button Button--primary',\r\n                        children: app.translator.trans('huydeerpets-mason.admin.buttons.add-answer'),\r\n                        loading: this.processing,\r\n                        disabled: !this.new_content,\r\n                        onclick: this.saveField.bind(this),\r\n                    }),\r\n                ]),\r\n            ]),\r\n        ]);\r\n    }\r\n\r\n    saveField() {\r\n        this.processing = true;\r\n\r\n        app.request({\r\n            method: 'POST',\r\n            url: app.forum.attribute('apiUrl') + this.field.apiEndpoint() + '/answers',\r\n            data: {\r\n                data: {\r\n                    attributes: {\r\n                        content: this.new_content,\r\n                        is_suggested: true,\r\n                    },\r\n                },\r\n            },\r\n        }).then(result => {\r\n            app.store.pushPayload(result);\r\n\r\n            this.new_content = '';\r\n            this.processing = false;\r\n            m.redraw();\r\n        });\r\n    }\r\n\r\n    updateSort(sorting) {\r\n        app.request({\r\n            method: 'POST',\r\n            url: app.forum.attribute('apiUrl') + this.field.apiEndpoint() + '/answers/order',\r\n            data: {\r\n                sort: sorting,\r\n            },\r\n        }).then(result => {\r\n            // Update sort attributes\r\n            app.store.pushPayload(result);\r\n            m.redraw();\r\n        });\r\n    }\r\n}\r\n","import app from 'flarum/app';\r\nimport icon from 'flarum/helpers/icon';\r\nimport Component from 'flarum/Component';\r\nimport Button from 'flarum/components/Button';\r\nimport Switch from 'flarum/components/Switch';\r\nimport FieldAnswersEdit from './FieldAnswersEdit';\r\n\r\nexport default class FieldEdit extends Component {\r\n    init() {\r\n        this.field = this.props.field;\r\n        this.dirty = false;\r\n        this.processing = false;\r\n        this.toggleFields = false;\r\n\r\n        if (this.field === null) {\r\n            this.initNewField();\r\n        }\r\n    }\r\n\r\n    initNewField() {\r\n        this.field = app.store.createRecord('huydeerpets-mason-field', {\r\n            attributes: {\r\n                name: '',\r\n                description: '',\r\n                min_answers_count: 0,\r\n                max_answers_count: 1,\r\n                user_values_allowed: false,\r\n                show_when_empty: false,\r\n                validation: '',\r\n                icon: '',\r\n            },\r\n        });\r\n    }\r\n\r\n    boxTitle() {\r\n        if (this.field.exists) {\r\n            return this.field.name();\r\n        }\r\n\r\n        return app.translator.trans('huydeerpets-mason.admin.buttons.new-field');\r\n    }\r\n\r\n    view() {\r\n        return m('.Mason-Box', [\r\n            (this.field.exists ? m('span.fa.fa-arrows.Mason-Box--handle.js-field-handle') : null),\r\n            m('.Button.Button--block.Mason-Box-Header', {\r\n                onclick: () => {\r\n                    this.toggleFields = !this.toggleFields;\r\n                },\r\n            }, [\r\n                m('.Mason-Box-Header-Title', this.boxTitle()),\r\n                m('div', [\r\n                    (this.field.exists ? [\r\n                        app.translator.trans('huydeerpets-mason.admin.buttons.edit-field'),\r\n                        ' ',\r\n                    ] : null),\r\n                    icon('fas fa-chevron-' + (this.toggleFields ? 'up' : 'down')),\r\n                ]),\r\n            ]),\r\n            (this.toggleFields ? this.viewFields() : null),\r\n        ]);\r\n    }\r\n\r\n    viewFields() {\r\n        return m('form', [\r\n            m('.Mason-Box--row', [\r\n                m('.Mason-Box--column', [\r\n                    m('h4', 'Field settings'),\r\n                    m('.Form-group', [\r\n                        m('label', app.translator.trans('huydeerpets-mason.admin.fields.name')),\r\n                        m('input.FormControl', {\r\n                            value: this.field.name(),\r\n                            oninput: m.withAttr('value', this.updateAttribute.bind(this, 'name')),\r\n                        }),\r\n                        m('.helpText', app.translator.trans('huydeerpets-mason.admin.fields.name-help')),\r\n                    ]),\r\n                    m('.Form-group', [\r\n                        m('label', app.translator.trans('huydeerpets-mason.admin.fields.description')),\r\n                        m('input.FormControl', {\r\n                            value: this.field.description(),\r\n                            oninput: m.withAttr('value', this.updateAttribute.bind(this, 'description')),\r\n                        }),\r\n                        m('.helpText', app.translator.trans('huydeerpets-mason.admin.fields.description-help')),\r\n                    ]),\r\n                    m('.Form-group', [\r\n                        m('label', [\r\n                            // TODO: while multiple answers are still in the work, show the \"min answers\" field as a checkbox\r\n                            Switch.component({\r\n                                state: this.field.min_answers_count() === 1,\r\n                                onchange: value => {\r\n                                    this.updateAttribute('min_answers_count', value ? 1 : 0);\r\n                                },\r\n                                children: app.translator.trans('huydeerpets-mason.admin.fields.required'),\r\n                            }),\r\n                        ]),\r\n                    ]),\r\n                    /*m('.Form-group', [\r\n                        m('label', app.translator.trans('huydeerpets-mason.admin.fields.min_answers_count')),\r\n                        m('input.FormControl', {\r\n                            type: 'number',\r\n                            min: 0,\r\n                            max: 1, // TODO: remove when multiple answers is ready\r\n                            value: this.field.min_answers_count(),\r\n                            oninput: m.withAttr('value', this.updateAttribute.bind(this, 'min_answers_count')),\r\n                        }),\r\n                    ]),\r\n                    m('.Form-group', [\r\n                        m('label', app.translator.trans('huydeerpets-mason.admin.fields.max_answers_count')),\r\n                        m('input.FormControl', {\r\n                            type: 'number',\r\n                            min: 1,\r\n                            disabled: true, // TODO: remove when multiple answers is ready\r\n                            value: this.field.max_answers_count(),\r\n                            oninput: m.withAttr('value', this.updateAttribute.bind(this, 'max_answers_count')),\r\n                        }),\r\n                    ]),*/\r\n                    m('.Form-group', [\r\n                        m('label', [\r\n                            Switch.component({\r\n                                state: this.field.show_when_empty(),\r\n                                onchange: this.updateAttribute.bind(this, 'show_when_empty'),\r\n                                children: app.translator.trans('huydeerpets-mason.admin.fields.show_when_empty'),\r\n                            }),\r\n                        ]),\r\n                        m('.helpText', app.translator.trans('huydeerpets-mason.admin.fields.show_when_empty-help')),\r\n                    ]),\r\n                    m('.Form-group', [\r\n                        m('label', [\r\n                            Switch.component({\r\n                                state: this.field.user_values_allowed(),\r\n                                onchange: this.updateAttribute.bind(this, 'user_values_allowed'),\r\n                                children: app.translator.trans('huydeerpets-mason.admin.fields.user_values_allowed'),\r\n                            }),\r\n                        ]),\r\n                        m('.helpText', app.translator.trans('huydeerpets-mason.admin.fields.user_values_allowed-help')),\r\n                    ]),\r\n                    m('.Form-group', [\r\n                        m('label', app.translator.trans('huydeerpets-mason.admin.fields.validation')),\r\n                        m('input.FormControl', {\r\n                            disabled: !this.field.user_values_allowed(),\r\n                            placeholder: this.field.user_values_allowed() ? '' : app.translator.trans('huydeerpets-mason.admin.fields.enable-user-values-for-validation'),\r\n                            value: this.field.validation(),\r\n                            oninput: m.withAttr('value', this.updateAttribute.bind(this, 'validation')),\r\n                        }),\r\n                        m('.helpText', app.translator.trans('huydeerpets-mason.admin.fields.validation-help', {\r\n                            a: m('a[href=https://laravel.com/docs/5.1/validation#available-validation-rules][_target=blank]'),\r\n                        })),\r\n                    ]),\r\n                    m('.Form-group', [\r\n                        m('label', [\r\n                            app.translator.trans('huydeerpets-mason.admin.fields.icon'),\r\n                            this.iconPreview(this.field.icon()),\r\n                        ]),\r\n                        m('input.FormControl', {\r\n                            value: this.field.icon(),\r\n                            oninput: m.withAttr('value', this.updateAttribute.bind(this, 'icon')),\r\n                        }),\r\n                        m('.helpText', app.translator.trans('huydeerpets-mason.admin.fields.icon-help', {\r\n                            a: m('a[href=https://fontawesome.com/icons?m=free][_target=blank]'),\r\n                        })),\r\n                    ]),\r\n                ]),\r\n                m('.Mason-Box--column', [\r\n                    m('h4', 'Field answers'),\r\n                    m('.Form-group', FieldAnswersEdit.component({\r\n                        field: this.field,\r\n                    })),\r\n                ]),\r\n            ]),\r\n            m('li.ButtonGroup', [\r\n                Button.component({\r\n                    type: 'submit',\r\n                    className: 'Button Button--primary',\r\n                    children: app.translator.trans('huydeerpets-mason.admin.buttons.' + (this.field.exists ? 'save' : 'add') + '-field'),\r\n                    loading: this.processing,\r\n                    disabled: !this.readyToSave(),\r\n                    onclick: this.saveField.bind(this),\r\n                }),\r\n                (this.field.exists ? Button.component({\r\n                    type: 'submit',\r\n                    className: 'Button Button--danger',\r\n                    children: app.translator.trans('huydeerpets-mason.admin.buttons.delete-field'),\r\n                    loading: this.processing,\r\n                    onclick: this.deleteField.bind(this),\r\n                }) : ''),\r\n            ]),\r\n        ]);\r\n    }\r\n\r\n    updateAttribute(attribute, value) {\r\n        this.field.pushAttributes({\r\n            [attribute]: value,\r\n        });\r\n\r\n        this.dirty = true;\r\n    }\r\n\r\n    readyToSave() {\r\n        // TODO: check required fields\r\n        return this.dirty;\r\n    }\r\n\r\n    saveField() {\r\n        this.processing = true;\r\n\r\n        const createNewRecord = !this.field.exists;\r\n\r\n        this.field.save(this.field.data.attributes).then(() => {\r\n            if (createNewRecord) {\r\n                this.initNewField();\r\n                this.toggleFields = false;\r\n            }\r\n\r\n            this.processing = false;\r\n            this.dirty = false;\r\n\r\n            m.redraw();\r\n        }).catch(err => {\r\n            this.processing = false;\r\n\r\n            throw err;\r\n        });\r\n    }\r\n\r\n    deleteField() {\r\n        if (!confirm(app.translator.trans('huydeerpets-mason.admin.messages.delete-field-confirmation', {\r\n                name: this.field.name(),\r\n            }))) {\r\n            return;\r\n        }\r\n\r\n        this.processing = true;\r\n\r\n        this.field.delete().then(() => {\r\n            this.processing = false;\r\n\r\n            m.redraw();\r\n        }).catch(err => {\r\n            this.processing = false;\r\n\r\n            throw err;\r\n        });\r\n    }\r\n\r\n    iconPreview(value) {\r\n        if (!value) {\r\n            return '';\r\n        }\r\n\r\n        return [\r\n            ' (',\r\n            app.translator.trans('huydeerpets-mason.admin.fields.icon-preview', {\r\n                preview: icon(value),\r\n            }),\r\n            ')',\r\n        ];\r\n    }\r\n}\r\n","import app from 'flarum/app';\r\nimport saveSettings from \"flarum/utils/saveSettings\";\r\nimport Component from 'flarum/Component';\r\nimport Select from 'flarum/components/Select';\r\nimport Switch from 'flarum/components/Switch';\r\n\r\nexport default class MasonSettings extends Component {\r\n    init() {\r\n        this.fieldsSectionTitle = m.prop(app.data.settings['huydeerpets.mason.fields-section-title'] || '');\r\n        this.columnCount = m.prop(app.data.settings['huydeerpets.mason.column-count'] || 1);\r\n        this.labelsAsPlaceholders = m.prop(app.data.settings['huydeerpets.mason.labels-as-placeholders'] > 0);\r\n        this.fieldsInHero = m.prop(app.data.settings['huydeerpets.mason.fields-in-hero'] > 0);\r\n        this.hideEmptyFieldsSection = m.prop(app.data.settings['huydeerpets.mason.hide-empty-fields-section'] > 0);\r\n        this.tagsAsFields = m.prop(app.data.settings['huydeerpets.mason.tags-as-fields'] > 0);\r\n        this.tagsFieldName = m.prop(app.data.settings['huydeerpets.mason.tags-field-name'] || '');\r\n\r\n        this.columnOptions = {};\r\n\r\n        for (let i = 1; i <= 3; i++) {\r\n            this.columnOptions[i] = app.translator.trans('huydeerpets-mason.admin.settings.n-columns', {count: i});\r\n        }\r\n    }\r\n\r\n    view() {\r\n        return m('.Mason-Container', [\r\n            m('.Form-group', [\r\n                m('label', app.translator.trans('huydeerpets-mason.admin.settings.fields-section-title')),\r\n                m('input.FormControl', {\r\n                    value: this.fieldsSectionTitle(),\r\n                    placeholder: app.translator.trans('huydeerpets-mason.admin.settings.fields-section-title-placeholder'),\r\n                    onchange: m.withAttr('value', this.updateSetting.bind(this, this.fieldsSectionTitle, 'huydeerpets.mason.fields-section-title')),\r\n                }),\r\n                m('.helpText', app.translator.trans('huydeerpets-mason.admin.settings.fields-section-title-help')),\r\n            ]),\r\n            m('.Form-group', [\r\n                m('label', app.translator.trans('huydeerpets-mason.admin.settings.column-count')),\r\n                Select.component({\r\n                    options: this.columnOptions,\r\n                    value: this.columnCount(),\r\n                    onchange: this.updateSetting.bind(this, this.columnCount, 'huydeerpets.mason.column-count'),\r\n                }),\r\n            ]),\r\n            m('.Form-group', [\r\n                m('label', Switch.component({\r\n                    state: this.labelsAsPlaceholders(),\r\n                    onchange: this.updateSetting.bind(this, this.labelsAsPlaceholders, 'huydeerpets.mason.labels-as-placeholders'),\r\n                    children: app.translator.trans('huydeerpets-mason.admin.settings.labels-as-placeholders'),\r\n                })),\r\n                m('.helpText', app.translator.trans('huydeerpets-mason.admin.settings.labels-as-placeholders-help')),\r\n            ]),\r\n            m('.Form-group', [\r\n                m('label', Switch.component({\r\n                    state: this.fieldsInHero(),\r\n                    onchange: this.updateSetting.bind(this, this.fieldsInHero, 'huydeerpets.mason.fields-in-hero'),\r\n                    children: app.translator.trans('huydeerpets-mason.admin.settings.fields-in-hero'),\r\n                })),\r\n            ]),\r\n            m('.Form-group', [\r\n                m('label', Switch.component({\r\n                    state: this.hideEmptyFieldsSection(),\r\n                    onchange: this.updateSetting.bind(this, this.hideEmptyFieldsSection, 'huydeerpets.mason.hide-empty-fields-section'),\r\n                    children: app.translator.trans('huydeerpets-mason.admin.settings.hide-empty-fields-section'),\r\n                })),\r\n                m('.helpText', app.translator.trans('huydeerpets-mason.admin.settings.hide-empty-fields-section-help')),\r\n            ]),\r\n            m('.Form-group', [\r\n                m('label', Switch.component({\r\n                    state: this.tagsAsFields(),\r\n                    onchange: this.updateSetting.bind(this, this.tagsAsFields, 'huydeerpets.mason.tags-as-fields'),\r\n                    children: app.translator.trans('huydeerpets-mason.admin.settings.tags-as-field'),\r\n                })),\r\n                m('.helpText', app.translator.trans('huydeerpets-mason.admin.settings.tags-as-field-help')),\r\n            ]),\r\n            (this.tagsAsFields() ? m('.Form-group', [\r\n                m('label', app.translator.trans('huydeerpets-mason.admin.settings.tags-field-name')),\r\n                m('input.FormControl', {\r\n                    value: this.tagsFieldName(),\r\n                    placeholder: app.translator.trans('huydeerpets-mason.admin.settings.tags-field-name-placeholder'),\r\n                    onchange: m.withAttr('value', this.updateSetting.bind(this, this.tagsFieldName, 'huydeerpets.mason.tags-field-name')),\r\n                }),\r\n            ]) : null),\r\n        ]);\r\n    }\r\n\r\n    /**\r\n     * Updates setting in database.\r\n     * @param prop\r\n     * @param setting\r\n     * @param value\r\n     */\r\n    updateSetting(prop, setting, value) {\r\n        saveSettings({\r\n            [setting]: value\r\n        });\r\n\r\n        prop(value)\r\n    }\r\n}\r\n","import app from 'flarum/app';\r\nimport Answer from './../lib/models/Answer';\r\nimport Field from './../lib/models/Field';\r\nimport addMasonFieldsPane from './addMasonFieldsPane';\r\nimport addPermissions from './addPermissions';\r\n\r\napp.initializers.add('huydeerpets-mason', app => {\r\n    app.store.models['huydeerpets-mason-field'] = Field;\r\n    app.store.models['huydeerpets-mason-answer'] = Answer;\r\n\r\n    addMasonFieldsPane();\r\n    addPermissions();\r\n});\r\n","import app from 'flarum/app';\r\nimport Component from 'flarum/Component';\r\nimport FieldEdit from './../components/FieldEdit';\r\nimport sortByAttribute from './../../lib/helpers/sortByAttribute';\r\nimport MasonSettings from './../components/MasonSettings';\r\n\r\nexport default class MasonFieldsPane extends Component {\r\n    init() {\r\n        app.request({\r\n            method: 'GET',\r\n            url: app.forum.attribute('apiUrl') + '/huydeerpets/mason/fields',\r\n        }).then(result => {\r\n            app.store.pushPayload(result);\r\n            m.redraw();\r\n        });\r\n    }\r\n\r\n    config() {\r\n        this.$('.js-fields-container')\r\n            .sortable({\r\n                handle: '.js-field-handle',\r\n            })\r\n            .on('sortupdate', () => {\r\n                const sorting = this.$('.js-field-data')\r\n                    .map(function () {\r\n                        return $(this).data('id');\r\n                    })\r\n                    .get();\r\n\r\n                this.updateSort(sorting);\r\n            });\r\n    }\r\n\r\n    view() {\r\n        const fields = app.store.all('huydeerpets-mason-field');\r\n\r\n        let fieldsList = [];\r\n\r\n        sortByAttribute(fields)\r\n            .forEach(field => {\r\n                // Build array of fields to show.\r\n                fieldsList.push(m('.js-field-data', {\r\n                    key: field.id(),\r\n                    'data-id': field.id(),\r\n                }, FieldEdit.component({\r\n                    field,\r\n                })));\r\n            });\r\n\r\n        return m('.container', [\r\n            m('h2', app.translator.trans('huydeerpets-mason.admin.titles.fields')),\r\n            m('.Mason-Container', [\r\n                m('.js-fields-container', fieldsList),\r\n                FieldEdit.component({\r\n                    key: 'new',\r\n                    field: null,\r\n                }),\r\n            ]),\r\n            m('h2', app.translator.trans('huydeerpets-mason.admin.titles.settings')),\r\n            MasonSettings.component(),\r\n        ]);\r\n    }\r\n\r\n    updateSort(sorting) {\r\n        app.request({\r\n            method: 'POST',\r\n            url: app.forum.attribute('apiUrl') + '/huydeerpets/mason/fields/order',\r\n            data: {\r\n                sort: sorting,\r\n            },\r\n        }).then(result => {\r\n            // Update sort attributes\r\n            app.store.pushPayload(result);\r\n            m.redraw();\r\n        });\r\n    }\r\n}\r\n","export default function (items, attr = 'sort') {\r\n    return items.sort(\r\n        (a, b) => a[attr]() - b[attr]()\r\n    );\r\n}\r\n","import app from 'flarum/app';\r\nimport Model from 'flarum/Model';\r\nimport mixin from 'flarum/utils/mixin';\r\n\r\nexport default class Answer extends mixin(Model, {\r\n    content: Model.attribute('content'),\r\n    is_suggested: Model.attribute('is_suggested'),\r\n    sort: Model.attribute('sort'),\r\n    field: Model.hasOne('field'),\r\n}) {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    apiEndpoint() {\r\n        return '/huydeerpets/mason/answers' + (this.exists ? '/' + this.data.id : '');\r\n    }\r\n}\r\n","import app from 'flarum/app';\r\nimport Model from 'flarum/Model';\r\nimport mixin from 'flarum/utils/mixin';\r\nimport computed from 'flarum/utils/computed';\r\n\r\nexport default class Field extends mixin(Model, {\r\n    name: Model.attribute('name'),\r\n    description: Model.attribute('description'),\r\n    min_answers_count: Model.attribute('min_answers_count'),\r\n    max_answers_count: Model.attribute('max_answers_count'),\r\n    show_when_empty: Model.attribute('show_when_empty'),\r\n    user_values_allowed: Model.attribute('user_values_allowed'),\r\n    validation: Model.attribute('validation'),\r\n    icon: Model.attribute('icon'),\r\n    sort: Model.attribute('sort'),\r\n    deleted_at: Model.attribute('deleted_at', Model.transformDate),\r\n    all_answers: Model.hasMany('all_answers'),\r\n    suggested_answers: Model.hasMany('suggested_answers'),\r\n    required: computed('min_answers_count', min_answers_count => min_answers_count > 0),\r\n    multiple: computed('max_answers_count', max_answers_count => max_answers_count > 1),\r\n}) {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    apiEndpoint() {\r\n        return '/huydeerpets/mason/fields' + (this.exists ? '/' + this.data.id : '');\r\n    }\r\n}\r\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/AdminLinkButton'];","module.exports = flarum.core.compat['components/AdminNav'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/PermissionGrid'];","module.exports = flarum.core.compat['components/Select'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['utils/computed'];","module.exports = flarum.core.compat['utils/mixin'];","module.exports = flarum.core.compat['utils/saveSettings'];"],"sourceRoot":""}